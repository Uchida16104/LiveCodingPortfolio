name: tone-maker

on:
  push:
  schedule:
    - cron: "0 * * * *"
    - cron: "1 * * * *"
    - cron: "2 * * * *"
    - cron: "3 * * * *"
    - cron: "4 * * * *"
    - cron: "5 * * * *"
    - cron: "6 * * * *"
    - cron: "7 * * * *"
    - cron: "8 * * * *"
    - cron: "9 * * * *"
    - cron: "10 * * * *"
    - cron: "11 * * * *"
    - cron: "12 * * * *"
    - cron: "13 * * * *"
    - cron: "14 * * * *"
    - cron: "15 * * * *"
    - cron: "16 * * * *"
    - cron: "17 * * * *"
    - cron: "18 * * * *"
    - cron: "19 * * * *"
    - cron: "20 * * * *"
    - cron: "21 * * * *"
    - cron: "22 * * * *"
    - cron: "23 * * * *"
    - cron: "24 * * * *"
    - cron: "25 * * * *"
    - cron: "26 * * * *"
    - cron: "27 * * * *"
    - cron: "28 * * * *"
    - cron: "29 * * * *"
    - cron: "30 * * * *"
    - cron: "31 * * * *"
    - cron: "32 * * * *"
    - cron: "33 * * * *"
    - cron: "34 * * * *"
    - cron: "35 * * * *"
    - cron: "36 * * * *"
    - cron: "37 * * * *"
    - cron: "38 * * * *"
    - cron: "39 * * * *"
    - cron: "40 * * * *"
    - cron: "41 * * * *"
    - cron: "42 * * * *"
    - cron: "43 * * * *"
    - cron: "44 * * * *"
    - cron: "45 * * * *"
    - cron: "46 * * * *"
    - cron: "47 * * * *"
    - cron: "48 * * * *"
    - cron: "49 * * * *"
    - cron: "50 * * * *"
    - cron: "51 * * * *"
    - cron: "52 * * * *"
    - cron: "53 * * * *"
    - cron: "54 * * * *"
    - cron: "55 * * * *"
    - cron: "56 * * * *"
    - cron: "57 * * * *"
    - cron: "58 * * * *"
    - cron: "59 * * * *"
    
jobs:
  job-with-ruby:
    runs-on: ubuntu-latest
    permissions:
     actions: write
     checks: write
     contents: write
     deployments: write
     issues: write
     packages: write
     pull-requests: write
     repository-projects: write
     security-events: write
     statuses: write
    steps:
      - uses: actions/checkout@v3
      - name: Move directory
        run: cd /home/runner/work/LiveCodingPortfolio/LiveCodingPortfolio
      - name: Update apt Package lists
        run: sudo apt update -y
      - name: Upgrade apt version
        run: sudo apt upgrade -y
      - name: Install Ruby
        run: sudo apt-get install ruby-full -y
      - name: Pre-install LFS
        run: sudo apt-get install git-lfs
      - name: Install LFS
        run: git lfs install
      - name: Confirm LFS version
        run: git lfs --version
      - name: Enable LFS
        uses: actions/checkout@v3
        with:
          lfs: true
          clean: false
      - name: Reset commits
        run: git reset --hard
      - name: Register user email
        run: git config --global user.email "uho02741358@gmail.com"
      - name: Register user name
        run: git config --global user.name "Uchida16104"
      - name: Remove files
        run: git rm index.rb
      - name: Commit to remove files
        run: git commit -m "Upload Zend framework 3 skeleton" -m "Use GitHub web GUI"
      - name: Push to remove files
        run: git push --force-with-lease origin master
      - name: Initialize Git
        run: git init
      - name: Run Ruby
        run: ruby
      - name: Initialize loop
        run: echo "loop do" >> index.rb
      - name: Play one of defined octaves
        run: echo "  play "$((RANDOM%231+1)) >> index.rb
      - name: End loop
        run: echo "end" >> index.rb
      - name: Register files
        run: git add .
      - name: Commit files
        run: git commit -m "Upload Zend framework 3 skeleton" -m "Use GitHub web GUI"
      - name: Update files
        uses: stefanzweifel/git-auto-commit-action@v4
      - name: Push files
        run: git push --force-with-lease origin master
